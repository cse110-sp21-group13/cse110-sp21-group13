name: JSDocs
on: ["pull_request"]
jobs: 
  deploy:
    runs-on: ubuntu-latest
    steps:
        - name: Checkout code
          uses: actions/checkout@v2
          
        - name: Build
          uses: andstor/jsdoc-action@v1
          with:
            source_dir: ./source
            recurse: true
            output_dir: ./source/jsdocs
        - name: list
          working-directory: ./source
          run: |
            git config user.name "github-actions[bot]"
            git config user.email "<>"
            git add -A
            git commit -m "Documentation update"
            git push https:://$USERNAME:$REPO_KEY@github.com/cse110-sp21-group13/jsdocs-cse110-sp21-group13.git
          env:
            REPO_KEY: ${{secrets.PUSH_TOKEN}}
            USERNAME: github-actions[bot]
